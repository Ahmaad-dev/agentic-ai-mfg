openapi: 3.0.3
info:
  version: 0.30.0
  title: Smart Planning API
servers:
  - url: http://localhost/api/v1

paths:
  ### Internationalization
  /i18n/translations:
    get:
      summary: Query translations.
      operationId: queryTranslations
      tags:
        - I18nV1
      parameters:
        - $ref: "#/components/parameters/LanguageId_QueryRequired"
      responses:
        "200":
          $ref: "#/components/responses/TranslationsAsMap"
  ### Snapshots
  /snapshots:
    get:
      summary: Query snapshots.
      operationId: querySnapshots
      tags:
        - SnapshotsV1
      parameters:
        - $ref: "#/components/parameters/PageNr_Query"
        - $ref: "#/components/parameters/PageSize_Query"
        - name: parentId
          in: query
          description: Id of the parent snapshot. If not specified, only the top level snapshots are returned.
          required: false
          schema:
            type: string
            format: uuid
        - name: nameContains
          in: query
          description: Filters by the name of the snapshot.
          required: false
          schema:
            type: string
            minLength: 1
        - name: commentContains
          in: query
          description: Filters by the comment.
          required: false
          schema:
            type: string
            minLength: 1
        - name: modifiedByContains
          in: query
          description: Filters by the person who modified the snapshot.
          required: false
          schema:
            type: string
            minLength: 1
        - name: modifiedAtFrom
          in: query
          description: Filters my modification date (including start).
          required: false
          schema:
            type: string
            format: date-time
        - name: modifiedAtUntil
          in: query
          description: Filters my modification date (excluding end).
          required: false
          schema:
            type: string
            format: date-time
      responses:
        "200":
          $ref: "#/components/responses/PagedListListOfSnapshotsWithoutData"
    post:
      summary: Create a new snapshots.
      operationId: createSnapshot
      tags:
        - SnapshotsV1
      parameters:
        - name: runCrawler
          in: query
          description: If the snapshot crawler should be started.
          schema:
            type: boolean
            default: false
        - name: copyFrom
          in: query
          description: Id of the snapshot where to copy from.
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SnapshotCreateRequest"
      responses:
        "201":
          $ref: "#/components/responses/SnapshotWithoutData"
  /snapshots/{snapshotId}:
    get:
      summary: Returns a snapshot.
      operationId: fetchSnapshot
      tags:
        - SnapshotsV1
      parameters:
        - $ref: "#/components/parameters/SnapshotId_Path"
      responses:
        "200":
          $ref: "#/components/responses/SnapshotWithData"
        "404":
          $ref: "#/components/responses/SnapshotNotFound"
    put:
      summary: Update a snapshot.
      operationId: updateSnapshot
      tags:
        - SnapshotsV1
      parameters:
        - $ref: "#/components/parameters/SnapshotId_Path"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SnapshotUpdateRequest"
      responses:
        "200":
          $ref: "#/components/responses/SnapshotWithoutData"
        "404":
          description: Snapshot not found.
    delete:
      summary: Delete a snapshot.
      operationId: deleteSnapshot
      tags:
        - SnapshotsV1
      parameters:
        - $ref: "#/components/parameters/SnapshotId_Path"
      responses:
        "204":
          description: Snapshot deleted.
        "404":
          $ref: "#/components/responses/SnapshotNotFound"
        "409":
          description: Conflict while deleting snapshot.
  /snapshots/{snapshotId}/validation-messages:
    get:
      summary: Query validation messages for a snapshot.
      operationId: queryValidationMessages
      tags:
        - SnapshotsV1
      parameters:
        - $ref: "#/components/parameters/SnapshotId_Path"
      responses:
        "200":
          $ref: "#/components/responses/ListOfValidationMessages"
        "404":
          $ref: "#/components/responses/SnapshotNotFound"
  /snapshots/{snapshotId}/run-solver:
    post:
      summary: Run the solver engine for the given snapshot which must be successfully validated.
      operationId: runSolver
      tags:
        - SnapshotsV1
      parameters:
        - $ref: "#/components/parameters/SnapshotId_Path"
      responses:
        "200":
          $ref: "#/components/responses/PlanningRunWithoutResult"
        "400":
          description: Snapshot not successfully validated.
        "404":
          $ref: "#/components/responses/SnapshotNotFound"
        "503":
          description: Maximum number of concurrent requests to solver engine reached.
  ### Planning runs
  /planning-runs:
    get:
      summary: Query planning runs.
      operationId: queryPlanningRuns
      tags:
        - PlanningRunsV1
      parameters:
        - $ref: "#/components/parameters/PageNr_Query"
        - $ref: "#/components/parameters/PageSize_Query"
        - name: q
          in: query
          description: Filters by name or comment of the associated snapshot (partial matches).
          required: false
          schema:
            type: string
            minLength: 1
      responses:
        "200":
          $ref: "#/components/responses/PagedListOfPlanningRuns"
  /planning-runs/currently-active:
    get:
      summary: Fetch the currently active planning run.
      operationId: fetchActivePlanningRun
      tags:
        - PlanningRunsV1
      responses:
        "200":
          $ref: "#/components/responses/PlanningRunWithResult"
        "404":
          $ref: "#/components/responses/PlanningRunNotFound"
  /planning-runs/{planningRunId}:
    get:
      summary: Fetch planning run.
      operationId: fetchPlanningRun
      tags:
        - PlanningRunsV1
      parameters:
        - $ref: "#/components/parameters/PlanningRunId_Path"
      responses:
        "200":
          $ref: "#/components/responses/PlanningRunWithResult"
        "404":
          $ref: "#/components/responses/PlanningRunNotFound"
    delete:
      summary: Delete a planning run.
      operationId: deletePlanningRun
      tags:
        - PlanningRunsV1
      parameters:
        - $ref: "#/components/parameters/PlanningRunId_Path"
      responses:
        "204":
          description: Planning run deleted.
        "404":
          $ref: "#/components/responses/PlanningRunNotFound"
  /planning-runs/{planningRunId}/work-items:
    get:
      summary: Query work items for a planning run.
      operationId: queryWorkItems
      tags:
        - PlanningRunsV1
      parameters:
        - $ref: "#/components/parameters/PlanningRunId_Path"
        - name: fromTime
          in: query
          description: Filters by time (minimum inclusive).
          schema:
            type: string
            format: date-time
        - name: untilTime
          in: query
          description: Filters by time (maximum exclusive).
          schema:
            type: string
            format: date-time
      responses:
        "200":
          $ref: "#/components/responses/ListOfWorkItems"
        "404":
          $ref: "#/components/responses/PlanningRunNotFound"
  /planning-runs/{planningRunId}/production-orders:
    get:
      summary: Query work items for a planning run.
      operationId: queryProductionOrders
      tags:
        - PlanningRunsV1
      parameters:
        - $ref: "#/components/parameters/PlanningRunId_Path"
        - name: fromTime
          in: query
          description: Filters by time (minimum inclusive).
          schema:
            type: string
            format: date-time
        - name: untilTime
          in: query
          description: Filters by time (maximum exclusive).
          schema:
            type: string
            format: date-time
      responses:
        "200":
          $ref: "#/components/responses/ListOfExtendedProductionOrders"
        "404":
          $ref: "#/components/responses/PlanningRunNotFound"
  /planning-runs/{planningRunId}/equipment-unavailabilities:
    get:
      summary: Query equipment unavailabilities for a planning run.
      operationId: queryEquipmentUnavailabilities
      tags:
        - PlanningRunsV1
      parameters:
        - $ref: "#/components/parameters/PlanningRunId_Path"
        - name: fromTime
          in: query
          description: Filters by time (minimum inclusive).
          schema:
            type: string
            format: date-time
        - name: untilTime
          in: query
          description: Filters by time (maximum exclusive).
          schema:
            type: string
            format: date-time
      responses:
        "200":
          $ref: "#/components/responses/ListOfEquipmentUnavailabilities"
        "404":
          $ref: "#/components/responses/PlanningRunNotFound"
  /planning-runs/{planningRunId}/solver-metrics:
    get:
      summary: Get solver metrics for a planning run.
      operationId: getSolverMetrics
      tags:
        - PlanningRunsV1
      parameters:
        - $ref: "#/components/parameters/PlanningRunId_Path"
      responses:
        "200":
          $ref: "#/components/responses/SolverMetrics"
        "404":
          $ref: "#/components/responses/PlanningRunNotFound"
  /planning-runs/{planningRunId}/utilization:
    get:
      summary: Get utilization data for a planning run.
      operationId: getUtilization
      tags:
        - PlanningRunsV1
      parameters:
        - $ref: "#/components/parameters/PlanningRunId_Path"
        - name: fromTime
          in: query
          description: Filters by time (minimum inclusive).
          schema:
            type: string
            format: date-time
        - name: untilTime
          in: query
          description: Filters by time (maximum exclusive).
          schema:
            type: string
            format: date-time
      responses:
        "200":
          $ref: "#/components/responses/Utilization"
        "404":
          $ref: "#/components/responses/PlanningRunNotFound"
  /planning-runs/{planningRunId}/customer-order-positions:
    get:
      summary: Query customer order positions for a planning run.
      operationId: queryCustomerOrderPositions
      tags:
        - PlanningRunsV1
      parameters:
        - $ref: "#/components/parameters/PlanningRunId_Path"
      responses:
        "200":
          $ref: "#/components/responses/ListOfCustomerOrderPositions"
        "404":
          $ref: "#/components/responses/PlanningRunNotFound"
  /planning-runs/{planningRunId}/customer-order-positions/{customerOrderPositionId}:
    get:
      summary: Get a specific customer order position for a planning run.
      operationId: getCustomerOrderPosition
      tags:
        - PlanningRunsV1
      parameters:
        - $ref: "#/components/parameters/PlanningRunId_Path"
        - name: customerOrderPositionId
          description: Id of a customer order position.
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        "200":
          $ref: "#/components/responses/CustomerOrderPosition"
        "404":
          $ref: "#/components/responses/PlanningRunNotFound"
  /planning-runs/{planningRunId}/ordat:
    post:
      summary: Transmit planning run to ORDAT ERP system.
      operationId: transmitToOrdat
      tags:
        - PlanningRunsV1
      parameters:
        - $ref: "#/components/parameters/PlanningRunId_Path"
      responses:
        "200":
          description: Data transmitted successfully.
        "404":
          $ref: "#/components/responses/PlanningRunNotFound"

components:
  parameters:
    ### Pagination
    PageNr_Query:
      name: pageNumber
      description: Zero-based page index, must not be negative
      in: query
      schema:
        type: integer
        format: int32
        minimum: 0
        default: 0
    PageSize_Query:
      name: pageSize
      description: The size of the page to be returned, must be greater than 0
      in: query
      schema:
        type: integer
        format: int32
        minimum: 1
        maximum: 1000
        default: 100
    ### Internationalization
    LanguageId_QueryRequired:
      name: lang
      in: query
      required: true
      schema:
        $ref: "#/components/schemas/LanguageId"
    ### Snapshots
    SnapshotId_Path:
      name: snapshotId
      description: Id of a snapshot.
      in: path
      required: true
      schema:
        type: string
        format: uuid
    ### Planning runs
    PlanningRunId_Path:
      name: planningRunId
      description: Id of a planning run.
      in: path
      required: true
      schema:
        type: string
        format: uuid
  schemas:
    ### Paging & Sorting
    OrderDirection:
      type: string
      format: enum
        - ASC
        - DESC
      nullable: false
      default: ASC
    SlicedList:
      type: object
      description: Encloses a sliced list of elements.
      properties:
        pageNumber:
          description: Number of the current page. Is always non-negative.
          type: integer
          format: int32
          nullable: false
          minimum: 0
        pageSize:
          description: Size of the page.
          type: integer
          format: int32
          nullable: false
          minimum: 1
        numberOfElementsOnPage:
          description: Number of elements currently on this page.
          type: integer
          format: int32
          nullable: false
          minimum: 0
        isFirstPage:
          description: Whether the current page is the first one.
          type: boolean
          nullable: false
        isLastPage:
          description: Whether the current page is the last one.
          type: boolean
          nullable: false
        hasNextPage:
          description: If there is a next page.
          type: boolean
          nullable: false
        hasPreviousPage:
          description: If there is a previous page.
          type: boolean
          nullable: false
        hasContentOnPage:
          description: Whether the page has content at all.
          type: boolean
          nullable: false
        elementsSortedBy:
          type: array
          nullable: false
          items:
            type: object
            properties:
              property:
                type: string
                nullable: false
              direction:
                $ref: "#/components/schemas/OrderDirection"
            required:
              - property
              - direction
      required:
        - pageNumber
        - pageSize
        - numberOfElementsOnPage
        - isFirstPage
        - isLastPage
        - hasNextPage
        - hasPreviousPage
        - hasContentOnPage
        - elementsSortedBy
    PagedList:
      description: Encloses a paged list of elements.
      allOf:
        - $ref: "#/components/schemas/SlicedList"
        - type: object
          properties:
            totalElements:
              description: Total amount of elements.
              type: integer
              format: int64
              nullable: false
            totalPages:
              description: Total number of pages.
              type: integer
              format: int32
              nullable: false
          required:
            - totalElements
            - totalPages
    ### Translations
    LanguageId:
      type: string
      description: "A two-letter language code conforming to ISO 639-1 standards (e.g., 'EN' for English, 'DE' for German)."
      pattern: "^[a-zA-Z]{2}$"
    ### Material status (aka Materialampel)
    MaterialState:
      type: string
      description: State of material.
      enum: [ GREEN, YELLOW, RED ]
    ### Snapshots
    SnapshotCommon:
      type: object
      properties:
        name:
          type: string
          nullable: false
        comment:
          type: string
      required:
        - name
    SnapshotWithoutData:
      allOf:
        - $ref: "#/components/schemas/SnapshotCommon"
        - type: object
          properties:
            id:
              type: string
              format: uuid
              nullable: false
            parentId:
              type: string
              format: uuid
            nrOfChildren:
              type: integer
              format: int32
              nullable: false
            isSuccessfullyValidated:
              type: boolean
              nullable: false
            dataModifiedAt:
              type: string
              format: date-time
            dataModifiedBy:
              type: string
            planningRun:
              $ref: "#/components/schemas/PlanningRunWithoutResult"
          required:
            - id
            - nrOfChildren
            - isSuccessfullyValidated
    SnapshotWithData:
      allOf:
        - $ref: "#/components/schemas/SnapshotWithoutData"
        - properties:
            dataJson:
              type: string
    SnapshotUpdateRequest:
      allOf:
        - $ref: "#/components/schemas/SnapshotCommon"
        - properties:
            dataJson:
              type: string
    SnapshotCreateRequest:
      allOf:
        - $ref: "#/components/schemas/SnapshotCommon"
        - type: object
          properties:
            parentId:
              type: string
              format: uuid
    PagedListListOfSnapshotsWithoutData:
      allOf:
        - $ref: "#/components/schemas/PagedList"
        - type: object
          properties:
            elements:
              type: array
              items:
                $ref: "#/components/schemas/SnapshotWithoutData"
    ### Planning runs
    PlanningRunWithoutResult:
      type: object
      properties:
        id:
          type: string
          format: uuid
          nullable: false
        runAt:
          type: string
          format: date-time
          nullable: false
        sentToErpAt:
          type: string
          format: date-time
      required:
        - id
        - runAt
        - snapshotName
    PlanningRunWithResult:
      allOf:
        - $ref: "#/components/schemas/PlanningRunWithoutResult"
        - type: object
          properties:
            resultJson:
              type: string
              nullable: false
          required:
            - resultJson
    PlanningRunListItem:
      type: object
      properties:
        id:
          type: string
          format: uuid
          nullable: false
        runAt:
          type: string
          format: date-time
          nullable: false
        sentToErpAt:
          type: string
          format: date-time
        snapshotId:
          type: string
          format: uuid
          nullable: false
        snapshotName:
          type: string
          nullable: false
        snapshotComment:
          type: string
      required:
        - id
        - runAt
        - snapshotId
        - snapshotName
    PagedListOfPlanningRuns:
      allOf:
        - $ref: "#/components/schemas/PagedList"
        - type: object
          properties:
            elements:
              type: array
              items:
                $ref: "#/components/schemas/PlanningRunListItem"
    PagedListOfValidationMessages:
      allOf:
        - $ref: "#/components/schemas/PagedList"
        - type: object
          properties:
            elements:
              type: array
              items:
                $ref: "#/components/schemas/ValidationMessage"
    ### Solver metrics
    SolverMetrics:
      type: object
      description: Performance metrics from the solver engine.
      properties:
        totalCostFunctionValue:
          type: number
          format: float
          nullable: false
          description: The total cost function value from the solver's objective function.
        unmetDemands:
          type: array
          items:
            $ref: '#/components/schemas/UnmetDemand'
          description: List of demands that could not be planned.
      required:
        - totalCostFunctionValue
        - unmetDemands
    UnmetDemand:
      type: object
      properties:
        demand:
          $ref: '#/components/schemas/Demand'
        reason:
          type: string
          description: Human-readable explanation of why the demand could not be planned (in English)
      required:
        - demandId
        - reason
    ## Production order
    ProductionOrderBasic:
      type: object
      description: Represents a production order with basic information.
      properties:
        id:
          type: string
          format: uuid
          nullable: false
          description: Unique identifier for the production order.
        name:
          type: string
          description: Name for the production order.
        materialState:
          $ref: "#/components/schemas/MaterialState"
      required:
        - id
        - name
    ProductionOrderFull:
      allOf:
        - $ref: "#/components/schemas/ProductionOrderBasic"
        - type: object
          description: Represents a production order with full information.
          properties:
            startTime:
              type: string
              format: date-time
              description: Start time of the production order item.
            endTime:
              type: string
              format: date-time
              description: End time of the production order item.
          required:
            - startTime
            - endTime
    ProductionOrderExtended:
      allOf:
        - $ref: "#/components/schemas/ProductionOrderFull"
        - type: object
          description: Represents a production order with extended information (article, quantity, packaging).
          properties:
            articleId:
              type: string
              description: Unique identifier for the article.
            articleName:
              type: string
              description: Name of the article.
            quantity:
              type: number
              description: Quantity required.
            packaging:
              type: string
              description: Packaging type.
          required:
            - quantity
    ### Customer order position
    CustomerOrderPosition:
      type: object
      description: Represents a customer order positions.
      properties:
        id:
          type: string
          format: uuid
          nullable: false
          description: Unique identifier for the customer order position generated by smart planning.
        esaromOrderNumber:
          type: string
          description: Customer order position number by ESAROM.
        customerOrderNumber:
          type: string
          description: Customer order number by ESAROM.
        clerkNumber:
          type: string
          description: Clerk number.
        clerkName:
          type: string
          description: Clerk name.
        shippingMethod:
          type: string
          description: Shipping method.
        shippingMethodDescription:
          type: string
          description: Description of the shipping method.
        customerNumber:
          type: string
          description: Customer number by ESAROM.
        customerName:
          type: string
          description: Customer name by ESAROM.
        articleId:
          type: string
          description: Unique identifier for the article.
        articleName:
          type: string
          description: Name of the article.
        quantity:
          type: number
          format: double
          description: Quantity required.
        priority:
          type: integer
          description: Priority.
        dueDate:
          type: string
          format: date-time
          nullable: false
          description: Due date for the customer order position. An unconfirmed date is a 'Kundenwunschtermin'.
        isDueDateConfirmed:
          type: boolean
          nullable: false
          description: Indicates if the due date is confirmed.
        plannedEndTime:
          type: string
          format: date-time
          description: Planned completion time.
        delayDays:
          type: number
          format: double
          description: Difference between due date and planned end (in days).
        materialState:
          $ref: "#/components/schemas/MaterialState"
        productionOrders:
          type: array
          nullable: true
          items:
            $ref: "#/components/schemas/ProductionOrderFull"
      required:
        - id
        - quantity
        - dueDate
        - isDueDateConfirmed
    ### Work items
    WorkItem:
      type: object
      properties:
        id:
          type: string
          format: uuid
          nullable: false
          description: Unique identifier for the work item.
        key:
          type: string
          description: Identifier for the work item, linking to the work plan template.
        description:
          type: string
          description: Description of the work item.
        startTime:
          type: string
          format: date-time
          nullable: false
          description: Start time of the work item.
        endTime:
          type: string
          format: date-time
          nullable: false
          description: End time of the work item.
        productionOrder:
          $ref: "#/components/schemas/ProductionOrderBasic"
        equipments:
          type: array
          items:
            $ref: "#/components/schemas/Equipment"
        workers:
          type: array
          items:
            $ref: "#/components/schemas/Worker"
        articleId:
          type: string
          nullable: false
          description: Identifier for the article being processed.
        articleName:
          type: string
          description: Name of the article.
        batchSize:
          type: number
          format: double
          nullable: false
          description: The quantity processed in this work item (e.g., liters, units).
        predecessorIds:
          type: array
          items:
            type: string
            description: IDs of work items that must be completed before this work item can start.
        dispatcherGroup:
          type: string
          description: Dispatcher group of the first demand served by this work item.
        department:
          $ref: "#/components/schemas/Department"
        requiredQualifications:
          type: array
          items:
            type: string
          description: Qualifications required by the assigned equipments.
      required:
        - id
        - key
        - description
        - startTime
        - endTime
        - articleId
        - batchSize
    Worker:
      type: object
      properties:
        id:
          type: string
          nullable: false
          description: Unique identifier of the worker.
        name:
          type: string
          description: Name of the worker.
        utilization:
          type: number
          format: double
          nullable: false
          description: Utilization factor of the worker for this work item (between 0 and 1).
      required:
        - id
        - utilization
    Equipment:
      type: object
      properties:
        id:
          type: string
          nullable: false
          format: uuid
          description: Unique identifier for the equipment.
        key:
          type: string
          nullable: false
          description: ID used by ESAROM. Not unique, since ESAROM uses the same ID for identical equipment.
        name:
          type: string
          description: Name of the equipment.
      required:
        - id
        - key
    EquipmentUnavailability:
      type: object
      description: Groups all unavailability time ranges for a single equipment.
      properties:
        equipment:
          $ref: "#/components/schemas/Equipment"
        unavailabilities:
          type: array
          description: List of unavailability time ranges for the equipment.
          items:
            $ref: "#/components/schemas/EquipmentUnavailabilityItem"
      required:
        - equipment
        - unavailabilities
    EquipmentUnavailabilityItem:
      type: object
      description: Represents a single time range where an equipment is unavailable.
      properties:
        startTime:
          type: string
          format: date-time
          description: Start time of the unavailability.
        endTime:
          type: string
          format: date-time
          description: End time of the unavailability.
        note:
          type: string
          nullable: true
          description: Optional note explaining the unavailability.
      required:
        - startTime
        - endTime
    ValidationMessage:
      type: object
      description: A validation message from the solver engine.
      properties:
        level:
          type: string
          enum: [DEBUG, INFO, WARNING, ERROR]
          nullable: false
          description: Severity level of the message
        message:
          type: string
          description: Detailed validation message
      required:
        - level
        - message
    ### Demand
    Demand:
      type: object
      description: Represents a production demand.
      properties:
        id:
          type: string
          description: Unique identifier for the demand.
        articleId:
          type: string
          description: Article number associated with the demand.
        articleName:
          type: string
          description: Name of the article.
        quantity:
          type: number
          description: Quantity required.
        packaging:
          type: string
          description: Packaging type.
        successor:
          type: string
          description: Successor demand identifier.
        dueDate:
          type: string
          format: date-time
          description: Due date for the demand.
        priority:
          type: integer
          description: Priority of the demand (optional).
      required:
        - id
        - quantity
        - dueDate
        - articleId
    ### Utilization
    Utilization:
      type: object
      description: Represents utilization data for a planning run.
      properties:
        departments:
          type: array
          description: List of departments with utilization data.
          items:
            $ref: "#/components/schemas/DepartmentUtilization"
      required:
        - departments
    DepartmentUtilization:
      type: object
      description: Represents utilization data for a department.
      properties:
        department:
          $ref: "#/components/schemas/Department"
        aggregates:
          type: array
          description: List of daily aggregates for the department.
          items:
            $ref: "#/components/schemas/DailyUtilization"
      required:
        - department
        - aggregates
    Department:
      type: object
      description: Represents a department.
      properties:
        id:
          type: string
          description: Identifier for the department.
        name:
          type: string
          description: Name of the department.
      required:
        - id
    DailyUtilization:
      type: object
      description: Represents daily aggregated data.
      properties:
        date:
          type: string
          format: date
          description: Date of the aggregate in YYYY-MM-DD format.
        batchSizeSum:
          type: number
          format: double
          description: Sum of batch sizes for the day.
        productionOrders:
          type: integer
          description: Number of production orders for the day.
      required:
        - date
        - batchSizeSum
        - productionOrders
  responses:
    ### Translations
    TranslationsAsMap:
      description: Map of translation key to localized text.
      content:
        application/json:
          schema:
            type: object
            additionalProperties:
              type: string
    ### Snapshots
    SnapshotNotFound:
      description: Snapshot not found.
    SnapshotWithData:
      description: A single snapshot with JSON data.
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/SnapshotWithData"
    SnapshotWithoutData:
      description: A single snapshot without JSON data.
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/SnapshotWithoutData"
    PagedListListOfSnapshotsWithoutData:
      description: A paged list of snapshots without JSON data.
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/PagedListListOfSnapshotsWithoutData"
    ### Planning runs
    PlanningRunNotFound:
      description: Planning run not found.
    PlanningRunWithResult:
      description: A single planning run.
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/PlanningRunWithResult"
    PlanningRunWithoutResult:
      description: A single planning run without JSON result.
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/PlanningRunWithoutResult"
    PagedListOfPlanningRuns:
      description: A paged list of planning runs.
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/PagedListOfPlanningRuns"
    ### Solver metrics
    SolverMetrics:
      description: Solver metrics for a planning run.
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/SolverMetrics"
    ### Work items
    ListOfWorkItems:
      description: A list of work items.
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: "#/components/schemas/WorkItem"
    ### Production orders
    ListOfExtendedProductionOrders:
      description: A list of extended production orders.
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: "#/components/schemas/ProductionOrderExtended"
    ### Equipment unavailabilities
    ListOfEquipmentUnavailabilities:
      description: A list of equipment unavailabilities.
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: "#/components/schemas/EquipmentUnavailability"
          examples:
            sample:
              summary: Example response
              value:
                - equipment:
                    id: "2dd1b1c1-7e0a-4e06-96f9-db8f0a770862"
                    key: "AAR01"
                    name: "i am a dummy"
                  unavailabilities:
                    - start: "2025-09-29T00:00Z"
                      end: "2025-09-29T23:59Z"
                      note: "Karsai Albert: Instandhaltungswoche"
                    - start: "2025-09-30T00:00Z"
                      end: "2025-09-30T23:59Z"
                    - start: "2025-10-01T00:00Z"
                      end: "2025-10-01T23:59Z"
    ### Validation messages
    ListOfValidationMessages:
      description: A list of validation messages.
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: "#/components/schemas/ValidationMessage"
    ### Customer order positions
    ListOfCustomerOrderPositions:
      description: A list of customer order positions.
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: "#/components/schemas/CustomerOrderPosition"
    CustomerOrderPosition:
      description: A single customer order postion (including the production orders).
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/CustomerOrderPosition"
    ### Utilization
    Utilization:
      description: Utilization data for a planning run.
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Utilization"
